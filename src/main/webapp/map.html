<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            *{
                margin: 0px;
                padding: 0px;
            }
            html { height: 100% }
            body{ height: 100%; margin: 0px; padding: 0px;}
            #map_canvas { height: 100% }
            #shelf{position:fixed; top:10px; left:500px; height:100px;width:200px;background:white;opacity:0.7;}
            #draggable { position:absolute;
                         top:10px; left: 10px; width: 30px; height: 30px;z-index:1000000000;}
        </style>
        <script src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
        <script>
            if (navigator.geolocation)
            {
                navigator.geolocation.getCurrentPosition(showPosition);
            }
            else {
                x.innerHTML = "Geolocation is not supported by this browser.";
            }

            var lat, lon;

            function showPosition(position) {
                lat = position.coords.latitude;
                lon = position.coords.longitude;
                var map_canvas = document.getElementById('map_canvas');
                var map_options = {
                    center: new google.maps.LatLng(lat, lon),
                    zoom: 21,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                }
                var map = new google.maps.Map(map_canvas, map_options)

                var iconBase = 'https://maps.google.com/mapfiles/kml/shapes/';
                var icons = {
                    parking: {
                        icon: iconBase + 'parking_lot_maps.png',
                        shadow: iconBase + 'parking_lot_maps.shadow.png'
                    },
                    library: {
                        icon: iconBase + 'library_maps.png',
                        shadow: iconBase + 'library_maps.shadow.png'
                    },
                    info: {
                        icon: iconBase + 'info-i_maps.png',
                        shadow: iconBase + 'info-i_maps.shadow.png'
                    }
                };

                function addMarker(feature) {
                    var marker = new google.maps.Marker({
                        position: feature.position,
                        draggable: true,
                        animation: google.maps.Animation.DROP,
                        icon: icons[feature.type].icon,
                        shadow: {
                            url: icons[feature.type].shadow,
                            anchor: new google.maps.Point(16, 34)
                        },
                        map: map
                    });
                }
                var feature = new Object({
                    position: new google.maps.LatLng(lat, lon),
                    type: 'parking'
                });
                addMarker(feature);
            }

            //   google.maps.event.addDomListener(window, 'load', initialize);
        </script>
    </head>
    <body>
        <div id="map_canvas"></div>
    </body>
</html>
